aliases:
  - &entities http://data.opensanctions.org/v1/sources/${OSANC_SLUG}/latest/entities.csv
  - &identifiers http://data.opensanctions.org/v1/sources/${OSANC_SLUG}/latest/identifiers.csv
  - &addresses http://data.opensanctions.org/v1/sources/${OSANC_SLUG}/latest/addresses.csv
  - &birthdates http://data.opensanctions.org/v1/sources/${OSANC_SLUG}/latest/birthdates.csv
  - &birthplaces http://data.opensanctions.org/v1/sources/${OSANC_SLUG}/latest/birthplaces.csv
  - &nationalities http://data.opensanctions.org/v1/sources/${OSANC_SLUG}/latest/nationalities.csv
  - &aliases http://data.opensanctions.org/v1/sources/${OSANC_SLUG}/latest/aliases.csv
osanc:
    label: OpenSanctions.org
    info_url: https://opensanctions.org
    category: sanctions
    roles:
      - guest
    queries:
      - csv_url: *entities
        filters:
          type: individual
        entities:
          person:
            schema: Person
            key: id
            properties:
              name:
                column: name
              firstName:
                column: first_name
              secondName:
                column: second_name
              middleName:
                column: third_name
              lastName:
                column: last_name
              title:
                column: title
              gender:
                column: gender
              program:
                column: program
              summary:
                column: summary
              sourceUrl:
                column: url
              position:
                column: function
      - csv_url: *entities
        filters_not:
          type: individual
          type: vessel
        entities:
          entity:
            schema: LegalEntity
            key: id
            properties:
              name:
                column: name
              program:
                column: program
              sourceUrl:
                column: url
              summary:
                column: summary
      - csv_url: *identifiers
        filters:
          type: passport
        entities:
          entity:
            schema: Person
            key: entity_id
            properties:
              passportNumber:
                column: number
              nationality:
                column: country_code
              summary:
                column: summary
      - csv_url: *identifiers
        filters_not:
          type: passport
        entities:
          entity:
            schema: LegalEntity
            key: entity_id
            properties:
              idNumber:
                column: number
              country:
                column: country_code
              summary:
                column: summary
              notes:
                column: description
      - csv_url: *addresses
        entities:
          entity:
            schema: Entity
            key: entity_id
            properties:
              address:
                columns:
                  - street
                  - street_2
                  - region
                  - city
                  - postal_code
                  - country
                join: ', '
              country:
                column: country_code
      - csv_url: *aliases
        filters:
          quality: strong
        entities:
          entity:
            schema: Entity
            key: entity_id
            properties: 
              alias:
                column: name
              notes:
                column: description
      - csv_url: *aliases
        filters:
          quality: weak
        entities:
          entity:
            schema: Entity
            key: entity_id
            properties: 
              weakAlias:
                column: name
              notes:
                column: description
      - csv_url: *birthdates
        entities:
          entity:
            schema: Person
            key: entity_id
            properties: 
              birthDate:
                column: date
      - csv_url: *birthplaces
        entities:
          entity:
            schema: Entity
            key: entity_id
            properties: 
              country:
                column: country_code
              notes:
                column: place
      - csv_url: *nationalities
        entities:
          entity:
            schema: Person
            key: entity_id
            properties: 
              nationality:
                column: country_code